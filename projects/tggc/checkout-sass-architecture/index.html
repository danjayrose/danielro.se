<!DOCTYPE html><html lang=en-GB><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><title>Multi Brand SASS Architecture</title><meta name=description content="I work for a company that has an umbrella of e-commerce brands, all of which have a checkout which runs via the same asp.net application. Here I explain how ..."><link rel=canonical href=https://danielro.se/projects/tggc/checkout-sass-architecture><link rel=alternate type=application/rss+xml title=danielro.se href=https://danielro.se/feed.xml></head><style type=text/css>h1{margin-top:0;font-size:1rem;line-height:1.5rem;margin-bottom:0}article,header,img,main,nav{display:block}a,button{color:inherit}::selection{background:#fef4a8;color:#151515}::-moz-selection{background:#fef4a8;color:#151515}html{font-size:100%;line-height:1.5em;font-family:gentium book,sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;box-sizing:border-box}body{margin:0;color:#151515}a{background-color:transparent;transition:color .2s}.h1{font-size:1.75rem;line-height:1.75rem;margin-bottom:.75rem}ul{margin:1.5rem 0;padding:0 0 0 40px}nav ul{list-style:none;padding:0;margin:0}img{border:0;max-width:100%;-ms-interpolation-mode:bicubic}.btn,.burger-icon{display:inline-block}button{font:inherit;margin:0;overflow:visible;text-transform:none;-webkit-appearance:button;cursor:pointer}.page__header,.site-nav{overflow:hidden}button::-moz-focus-inner{border:0;padding:0}@font-face{font-family:"gentium book";src:url(/fonts/gentium-book--regular.woff2)format('woff2'),url(/fonts/gentium-book--regular.woff)format('woff');font-weight:400;font-style:normal}@font-face{font-family:"gentium book";src:url(/fonts/gentium-book--700.woff2)format('woff2'),url(/fonts/gentium-book--700.woff)format('woff');font-weight:700;font-style:normal}@font-face{font-family:"alfa slab one";src:url(/fonts/alfa-slab-one--regular.woff2)format('woff2'),url(/fonts/alfa-slab-one--regular.woff)format('woff');font-weight:400;font-style:normal}.page__sub-title{margin-top:-.75rem;margin-bottom:1.5rem}.page__header{padding-top:1.5rem;margin-bottom:1.3125rem}.h1{font-family:alfa slab one;font-weight:400;text-transform:uppercase;letter-spacing:.0375rem}.btn{outline:0;text-decoration:none;color:#fef4a8;border:none;padding:.6rem .75rem;background-color:#a20f48}.burger-icon,.burger-icon:after,.burger-icon:before{height:.125rem;background-color:#fff}.burger-icon{margin:.375rem .375rem 0 0;width:.99999rem;vertical-align:top;position:relative}.burger-icon:after,.burger-icon:before{left:0;content:'';position:absolute;transition:-webkit-transform .2s ease-in;transition:transform .2s ease-in}.burger-icon:before{width:60%;top:.24999rem}.burger-icon:after{width:75%;top:.5rem}*,:after,:before{box-sizing:inherit}body{display:flex;min-height:100vh;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;position:relative}@media (min-width:48rem){body:after,body:before{content:'';position:absolute;top:0;height:100%;width:calc((100% - 52.5rem)/ 2);z-index:2000;background:rgba(51,51,51,.1)}body:before{left:0}body:after{right:0}}.site-header:after,.site-nav:after{content:"";clear:both}@media (min-width:78rem){body:after,body:before{width:calc((100% - 75rem)/ 2)}}main{-webkit-flex:1;-ms-flex:1;flex:1}.wrapper{padding-left:1.125rem;padding-right:1.125rem;width:100%;margin-right:auto;margin-left:auto;max-width:52.5rem}@media (min-width:78rem){.wrapper{max-width:75rem}}.site-header:after{display:table}.site-logo{display:block;float:left;padding:.75rem .6rem .9375rem}body{padding-top:2.7rem}.site-nav{height:2.8875rem;position:fixed;top:0;width:100%;background:padding-box #a20f48;color:#fef4a8;transition:top .2s;z-index:3000;border-bottom:.1875rem solid rgba(0,0,0,.35)}.site-nav:after{display:table}@media (max-width:30rem){.site-nav .wrapper{padding-right:0;padding-left:0}.site-nav__sub-link:nth-of-type(2){border-left:1px solid #a20f48}}@media (min-width:30.1rem){.site-logo{padding-left:0}.site-nav__list{float:right;margin-left:0;margin-right:-.6rem}.site-nav__list-item{float:left}}.site-nav__link,.site-nav__sub-link{display:block;float:left;text-decoration:none;padding:.6rem}.site-nav__list-item:last-child .site-nav__link,.site-nav__list-item:last-child .site-nav__sub-link{padding-right:0}.site-nav__sub-link{color:#ee97b7;display:none;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.site-nav__btn{position:absolute;top:0;right:0;background-color:#555;color:#fff}.site-nav__btn:before{content:'';display:block;position:absolute;top:0;left:-3px;background-color:rgba(0,0,0,.35);height:100%;width:3px}.site-nav__btn:after{content:'all'}@media (min-width:30.1rem){.site-nav__list-item:last-child .site-nav__link,.site-nav__list-item:last-child .site-nav__sub-link{padding-right:.75rem}.cover,.site-nav__btn{display:none}}.cover{float:right;padding:.6rem 1.52082rem;background:#a20f48;border-left:3px solid #a20f48;color:#a20f48;position:relative;z-index:1000;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.page__header{background:center #d6d6d6;border-bottom:.1875rem solid #fef4a8}.page__title{max-width:350px;margin-left:1.125rem;box-sizing:content-box;padding-left:calc((100% - 52.5rem) / 2)}@media (min-width:78rem){.page__title{padding-left:calc((100% - 75rem) / 2)}}.page__sub-title{display:block;color:#a20f48;font-weight:700}</style><script>!function(e){function n(e,n,t){"use strict";function r(){for(var n,o=0;o<s.length;o++)s[o].href&&s[o].href.indexOf(e)>-1&&(n=!0);n?i.media=t||"all":setTimeout(r)}var i=window.document.createElement("link"),o=n||window.document.getElementsByTagName("script")[0],s=window.document.styleSheets;return i.rel="stylesheet",i.href=e,i.media="only x",o.parentNode.insertBefore(i,o),r(),i}for(var t in e)n(e[t])}(["/css/main.css"]);</script><noscript><link rel="stylesheet" href="/css/main.css"></noscript><body><header class=site-header><nav class="site-nav js-site-nav"><div class=wrapper><a class=site-logo href="/"><img src=/img/danielro.se.png alt=danielro.se></a><ul class=site-nav__list><li class=site-nav__list-item><div class=site-nav__signpost><a class=site-nav__link href="/about/">about</a></div><a class=site-nav__sub-link href="/about/">Lead Front End Developer</a></li><li class=site-nav__list-item><div class=site-nav__signpost><a class=site-nav__link href="/blog/">blog</a></div><a class=site-nav__sub-link href=/blog/sass/improving-google-image-search-layout>Improving Google's Image Search Layout</a> <a class=site-nav__sub-link href=/blog/site-architecture>Site Architecture</a></li><li class=site-nav__list-item><div class=site-nav__signpost><a class=site-nav__link href="/projects/">projects</a></div><a class=site-nav__sub-link href=/projects/tggc/checkout-sass-architecture>Multi Brand SASS Architecture</a></li><li class=site-nav__list-item><div class=site-nav__signpost><a class=site-nav__link href="/published/">published</a></div><a class=site-nav__sub-link href="//www.sitepoint.com/recreating-google-images-search-layout-css/">Recreating the Google Images Search Layout with CSS</a> <a class=site-nav__sub-link href="//www.sitepoint.com/responsive-fluid-width-variable-item-navigation-css/">Responsive, Fluid-Width, Variable-Item Navigation with CSS</a></li><li class=site-nav__list-item><div class=site-nav__signpost><a class=site-nav__link href=mailto:im@danielro.se>contact</a></div><a class=site-nav__sub-link href=mailto:im@danielro.se>im@danielro.se</a></li></ul><button class="site-nav__btn btn js-nav-open"><span class=burger-icon></span></button></div><div class=cover>all</div></nav></header><main class=site-content><article class=post><header class=page__header><h1 class="h1 page__title wrapper">Multi Brand SASS Architecture</h1><time class="page__sub-title wrapper" datetime=2016-01-24>Sunday 24th January 2016</time><nav class=tab><ol class="breadcrumb wrapper"><li class=breadcrumb__item><a class=breadcrumb__link href="/">Home</a>&nbsp;&rsaquo;&nbsp;</li><li class=breadcrumb__item><a class=breadcrumb__link href=/projects>Projects</a>&nbsp;&rsaquo;&nbsp;</li><li class=breadcrumb__item><a class=breadcrumb__link>Multi Brand SASS Architecture</a></li></ol></nav><div class=wrapper><time class=post__reading-time datetime=3m>Approx. 3 minute read</time></div></header><section class=page-content><p>I work for a company that has an umbrella of e-commerce brands, all of which have a checkout which runs via the same asp.net application. Here I explain how I scoped out the project and developed a SASS structure to remain DRY whilst providing the end user with a performant codebase.</p><p>The Brand Director wanted to keep consistency across these four brands and the wireframes were very similar. However, there were differences in fonts, colours, sizes, spacing and, on occasion, content. The differences meant that I had to branch out a grouping of CSS files (one per brand) from a centralised area in order to avoid redundant code, and resources in opposing brands.</p><p>SASS is a great tool for scenarios like this and combined with Grunt I was able to create a build process which utlised a centralised codebase for the common styles and a separate area for the brand specifics. Here’s the folder structure:</p><div class=highlight><pre><code class=language-ruby data-lang=ruby>/global/sass/
/gemporia/sass/
/jewellery-maker/sass/
/gem-collector/sass/
/nowseen/sass/</code></pre></div><p>The global folder contains all of the common styles the brands share and the remaining folders contain the brand specific SASS files. Note that I wanted to keep all code related to each brand within it’s own folder alongside all other brand assets.</p><p>The grunt configuration within the compass task is as follows:</p><div class=highlight><pre><code class=language-ruby data-lang=ruby>compass: {
    gemporia: {
        options: {
            importPath: &#39;global/sass/&#39;,
            config: &#39;gemporia/config.rb&#39;
        }
    },
    jewelleryMaker: {
        options: {
            importPath: &#39;global/sass/&#39;,
            config: &#39;jewellery-maker/config.rb&#39;
        }
    },
    ...
}</code></pre></div><p>As you can see, each brand has an importPath which is a Compass option that makes all files within the <code>global/sass</code> folder findable by SASS’s <code>@import</code> directive. This allows the ability to pull a bunch of SASS into the existing context. The config property enables the import of configuration set in the brands’ config.rb files. An excerpt of Gemporia’s config is below.</p><div class=highlight><pre><code class=language-ruby data-lang=ruby>...
css_dir = &#39;gemporia/css&#39;
sass_dir = &#39;gemporia/sass&#39;
images_dir = &#39;gemporia/img&#39;
fonts_dir = &#39;gemporia/fonts&#39;
...</code></pre></div><p>Adapted from <a href=http://sass-guidelin.es/#the-7-1-pattern>Hugo Giraudel’s 7-1 Pattern</a> (which is great btw) here’s a snippet from <code>gemporia/sass/main.scss</code> which will ultimately pull in all SASS files from the relative folders plus the <code>global/sass</code> folder. It will compile into <code>gemporia/css/main.css</code> based on the configuration. In the comments on the right you can see the actual location of the partials relative to the root.</p><div class=highlight><pre><code class=language-ruby data-lang=ruby>@import &#39;utils/theme&#39;;          // @import &#39;gemporia/sass/utils/_theme.scss&#39;;
@import &#39;utils/refine&#39;;         // @import &#39;gemporia/sass/utils/_refine.scss&#39;;
@import &#39;utils/variables&#39;;      // @import &#39;global/sass/utils/_variables.scss&#39;;  
@import &#39;utils/..&#39;;

@import &#39;base/fonts&#39;;           // @import &#39;gemporia/sass/base/_fonts.scss&#39;;
@import &#39;base/normalize&#39;;       // @import &#39;global/sass/base/_normalize.scss&#39;;  
@import &#39;base/..&#39;;

@import &#39;layout/grid&#39;;          // @import &#39;global/sass/layout/_grid.scss&#39;;
@import &#39;layout/..&#39;;

@import &#39;pages/login&#39;;          // @import &#39;global/sass/pages/_login.scss&#39;;
@import &#39;pages/..&#39;;

@import &#39;components/buttons&#39;;   // @import &#39;global/sass/components/_buttons.scss&#39;;
@import &#39;components/..&#39;;

@import &#39;vendors/..&#39;;</code></pre></div><p>You may have noticed that <code>utils/theme</code>, <code>utils/refine</code> and <code>base/fonts</code> are all imported from Gemporia’s SASS folder. This is how I was able to import the brand specific styles and variables.</p><p>The <em>theme</em> partial contains all variables that are referenced in the <code>global/sass</code> folder and the <em>fonts</em> partial imports the appropriate brand font files. <em>Refine</em>, however, acts a bit differently in that it contains a mixin, also called refine, which specifies all of the more general style differences between the brands.</p><p>For example, whilst 3 of the brands have square buttons, Jewellery Maker has rounded edged buttons. The refine mixin allows the import of border-radius to Jewellery Maker’s CSS file without affecting the other brands. A snippet from <code>components/buttons</code> show’s how this is achieved:</p><div class=highlight><pre><code class=language-ruby data-lang=ruby>.btn {
  background: $color-main;
  @include refine(btn);
  ...
}</code></pre></div><p>Then, within <code>jewellery-maker/sass/utils/refine</code>:</p><div class=highlight><pre><code class=language-ruby data-lang=ruby>@mixin refine($el) {
  @if $el == btn {
    border-radius: .25rem;
  }
  ...
}</code></pre></div><p>The output, if compiled as extended CSS, will be:</p><div class=highlight><pre><code class=language-ruby data-lang=ruby>.btn {
  background: #d3005d;
  border-radius: .25rem;
  ...
}</code></pre></div><p>The other brands will not see the <code>border-radius</code> property as this was omitted from their <em>refine</em> partials.</p></section></article></main><aside class=site-aside><div class=wrapper><a class=btn href="mailto:im@danielro.se?subject=Let's get to work">Did you like this? Hire me</a></div></aside><footer class=site-footer><section class=site-footer__small-print><div class=wrapper><small>Powered by <a href="//jekyllrb.com/">Jekyll</a>. Hosted by <a href=//github.com/danjayrose/danielro.se>Github</a>. Supercharged by <a href=//www.cloudflare.com>Cloudflare</a>.</small> <small class=copyright>Copyright &copy; danielro.se 2015.</small></div></section></footer><script src=/js/scripts.js async></script><script>!function(e,a,t,n,c,o,s){e.GoogleAnalyticsObject=c,e[c]=e[c]||function(){(e[c].q=e[c].q||[]).push(arguments)},e[c].l=1*new Date,o=a.createElement(t),s=a.getElementsByTagName(t)[0],o.async=1,o.src=n,s.parentNode.insertBefore(o,s)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create","UA-61335863-1","auto"),ga("send","pageview");</script></body></html>